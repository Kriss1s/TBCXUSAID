export default class HamburgerMenu {
  constructor() {
    this.checkbox = document.querySelector('#menu_checkbox');
    this.hamburger = document.querySelector('.hamburger-icon');
    this.navigation = document.querySelector('.vertical-nav');
    this.menu = document.querySelector('.navigation-background');
    this.prevScrollPos = window.scrollY;
    this.header = document.querySelector('.site-header-container');
  }

  init() {
    window.onscroll = this.handleScroll.bind(this);

    this.checkbox.addEventListener('click', () =>
      this.checkbox.checked ? this.check() : this.uncheck()
    );

    this.menu.addEventListener('click', () => {
      this.checkbox.checked = false;
      this.uncheck();
    });
  }

  check() {
    this.menu.classList.toggle('hidden-navbar');
    this.navigation.classList.add('appear-animation');
    this.navigation.classList.remove('hide-animation');
    document.body.classList.add('stop-scrolling');
  }
  uncheck() {
    this.menu.classList.remove('appear-animation');
    this.navigation.classList.remove('hide-animation');
    this.navigation.classList.add('hide-animation');
    document.body.classList.remove('stop-scrolling');

    setTimeout(() => {
      this.menu.classList.toggle('hidden-navbar');
    }, 500);
  }
  handleScroll() {
    const currentScrollPos = window.scrollY;

    if (this.prevScrollPos > currentScrollPos) {
      this.header.classList.remove('hidden-header');
    } else {
      this.header.classList.add('hidden-header');
    }

    this.prevScrollPos = currentScrollPos;
  }
}
